Q: Vue3.0çš„è®¾è®¡ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿåšäº†å“ªäº›ä¼˜åŒ–? 
A: æ›´å°ï¼šVue3ç§»é™¤ä¸€äº›ä¸å¸¸ç”¨çš„ API,å¼•å…¥tree-shakingï¼Œå¯ä»¥å°†æ— ç”¨æ¨¡å—â€œå‰ªè¾‘â€ï¼Œä»…æ‰“åŒ…éœ€è¦çš„ï¼Œä½¿æ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°äº†
æ›´å¿«ï¼šä¸»è¦ä½“ç°åœ¨ç¼–è¯‘æ–¹é¢ï¼šdiffç®—æ³•ä¼˜åŒ– é™æ€æå‡ äº‹ä»¶ç›‘å¬ç¼“å­˜ SSRä¼˜åŒ–
æ›´å‹å¥½ï¼švue3åœ¨å…¼é¡¾vue2çš„options APIçš„åŒæ—¶è¿˜æ¨å‡ºäº†composition APIï¼Œå¤§å¤§å¢åŠ äº†ä»£ç çš„é€»è¾‘ç»„ç»‡å’Œä»£ç å¤ç”¨èƒ½åŠ›
VUE3æ˜¯åŸºäºtypesciptç¼–å†™çš„ï¼Œå¯ä»¥äº«å—åˆ°è‡ªåŠ¨çš„ç±»å‹å®šä¹‰æç¤º
vue3ä»å¾ˆå¤šå±‚é¢éƒ½åšäº†ä¼˜åŒ–ï¼Œå¯ä»¥åˆ†æˆä¸‰ä¸ªæ–¹é¢ï¼š
æºç : vue3æ•´ä¸ªæºç æ˜¯é€šè¿‡ monorepo çš„æ–¹å¼ç»´æŠ¤çš„ï¼Œæ ¹æ®åŠŸèƒ½å°†ä¸åŒçš„æ¨¡å—æ‹†åˆ†åˆ°packages ç›®å½•ä¸‹é¢ä¸åŒçš„å­ç›®å½•ä¸­
æ€§èƒ½: ä½“ç§¯ä¼˜åŒ– ç¼–è¯‘ä¼˜åŒ– æ•°æ®åŠ«æŒä¼˜åŒ–, ç›¸æ¯”ä¹‹ä¸‹ï¼Œvue3æ˜¯é€šè¿‡proxyç›‘å¬æ•´ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹äºåˆ é™¤è¿˜æ˜¯ç›‘å¬å½“ç„¶ä¹Ÿèƒ½ç›‘å¬åˆ°
åŒæ—¶Proxy  å¹¶ä¸èƒ½ç›‘å¬åˆ°å†…éƒ¨æ·±å±‚æ¬¡çš„å¯¹è±¡å˜åŒ–ï¼Œè€Œ Vue3 çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ getter ä¸­å»é€’å½’å“åº”å¼ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯çœŸæ­£è®¿é—®åˆ°çš„å†…éƒ¨å¯¹è±¡æ‰ä¼šå˜æˆå“åº”å¼ï¼Œè€Œä¸æ˜¯æ— è„‘é€’å½’
è¯­æ³• API : è¯­æ³• API è¿™é‡Œå½“ç„¶è¯´çš„å°±æ˜¯composition APIï¼Œå…¶ä¸¤å¤§æ˜¾è‘—çš„ä¼˜åŒ–ï¼šä¼˜åŒ–é€»è¾‘ç»„ç»‡ ä¼˜åŒ–é€»è¾‘å¤ç”¨


Qï¼š Vue3.0 æ€§èƒ½æå‡ä¸»è¦æ˜¯é€šè¿‡å“ªå‡ æ–¹é¢ä½“ç°çš„ï¼Ÿ
Aï¼šç¼–è¯‘é˜¶æ®µ=>diffç®—æ³•ä¼˜åŒ–ï¼š vue3åœ¨diffç®—æ³•ä¸­ç›¸æ¯”vue2å¢åŠ äº†é™æ€æ ‡è®°ï¼Œå…³äºè¿™ä¸ªé™æ€æ ‡è®°ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºäº†ä¼šå‘ç”Ÿå˜åŒ–çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ªflagæ ‡è®°ï¼Œä¸‹æ¬¡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ç›´æ¥æ‰¾è¯¥åœ°æ–¹è¿›è¡Œæ¯”è¾ƒ
é™æ€æå‡ï¼šVue3ä¸­å¯¹ä¸å‚ä¸æ›´æ–°çš„å…ƒç´ ï¼Œä¼šåšé™æ€æå‡ï¼Œåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œåœ¨æ¸²æŸ“æ—¶ç›´æ¥å¤ç”¨ã€‚è¿™æ ·å°±å…å»äº†é‡å¤çš„åˆ›å»ºèŠ‚ç‚¹ï¼Œå¤§å‹åº”ç”¨ä¼šå—ç›Šäºè¿™ä¸ªæ”¹åŠ¨ï¼Œå…å»äº†é‡å¤çš„åˆ›å»ºæ“ä½œï¼Œä¼˜åŒ–äº†è¿è¡Œæ—¶å€™çš„å†…å­˜å ç”¨
äº‹ä»¶ç›‘å¬ç¼“å­˜ï¼šé»˜è®¤æƒ…å†µä¸‹ç»‘å®šäº‹ä»¶è¡Œä¸ºä¼šè¢«è§†ä¸ºåŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šå»è¿½è¸ªå®ƒçš„å˜åŒ–
SSRä¼˜åŒ–ï¼šå½“é™æ€å†…å®¹å¤§åˆ°ä¸€å®šé‡çº§æ—¶å€™ï¼Œä¼šç”¨createStaticVNodeæ–¹æ³•åœ¨å®¢æˆ·ç«¯å»ç”Ÿæˆä¸€ä¸ªstatic nodeï¼Œè¿™äº›é™æ€nodeï¼Œä¼šè¢«ç›´æ¥innerHtmlï¼Œå°±ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œç„¶åæ ¹æ®å¯¹è±¡æ¸²æŸ“
æºç ä½“ç§¯ => ä½“ç§¯å˜å°ï¼šç›¸æ¯”Vue2ï¼ŒVue3æ•´ä½“ä½“ç§¯å˜å°äº†ï¼Œé™¤äº†ç§»å‡ºä¸€äº›ä¸å¸¸ç”¨çš„APIï¼Œå†é‡è¦çš„æ˜¯Tree shanking
ä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚refã€reavtivedã€computedç­‰ï¼Œä»…ä»…åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰æ‰“åŒ…ï¼Œæ²¡ç”¨åˆ°çš„æ¨¡å—éƒ½è¢«æ‘‡æ‰ï¼Œæ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å°
å“åº”å¼ç³»ç»Ÿ=>vue2ä¸­é‡‡ç”¨ definePropertyæ¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œç„¶åè¿›è¡Œæ·±åº¦éå†æ‰€æœ‰å±æ€§ï¼Œç»™æ¯ä¸ªå±æ€§æ·»åŠ getterå’Œsetterï¼Œå®ç°å“åº”å¼
vue3é‡‡ç”¨proxyé‡å†™äº†å“åº”å¼ç³»ç»Ÿï¼Œå› ä¸ºproxyå¯ä»¥å¯¹æ•´ä¸ªå¯¹è±¡è¿›è¡Œç›‘å¬ï¼Œæ‰€ä»¥ä¸éœ€è¦æ·±åº¦éå†
å¯ä»¥ç›‘å¬åŠ¨æ€å±æ€§çš„æ·»åŠ 
å¯ä»¥ç›‘å¬åˆ°æ•°ç»„çš„ç´¢å¼•å’Œæ•°ç»„lengthå±æ€§
å¯ä»¥ç›‘å¬åˆ é™¤å±æ€§

Q: Vue3.0é‡Œä¸ºä»€ä¹ˆè¦ç”¨ Proxy API æ›¿ä»£ defineProperty API 
A: vue2 definePropertyæ£€æµ‹ä¸åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤
æ•°ç»„APIæ–¹æ³•æ— æ³•ç›‘å¬åˆ° éœ€è¦å¯¹æ¯ä¸ªå±æ€§è¿›è¡Œéå†ç›‘å¬ï¼Œå¦‚æœåµŒå¥—å¯¹è±¡ï¼Œéœ€è¦æ·±å±‚ç›‘å¬ï¼Œé€ æˆæ€§èƒ½é—®é¢˜

Proxyçš„ç›‘å¬æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰æ“ä½œä¼šè¿›å…¥ç›‘å¬æ“ä½œï¼Œè¿™å°±å®Œå…¨å¯ä»¥ä»£ç†æ‰€æœ‰å±æ€§äº†

Q: Vue3.0 æ‰€é‡‡ç”¨çš„ Composition Api ä¸ Vue2.x ä½¿ç”¨çš„ Options Api æœ‰ä»€ä¹ˆä¸åŒ
A: é€šå¸¸ä½¿ç”¨Vue2å¼€å‘çš„é¡¹ç›®ï¼Œæ™®éä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
ä»£ç çš„å¯è¯»æ€§éšç€ç»„ä»¶å˜å¤§è€Œå˜å·®
æ¯ä¸€ç§ä»£ç å¤ç”¨(mixin)çš„æ–¹å¼ï¼Œéƒ½å­˜åœ¨ç¼ºç‚¹
TypeScriptæ”¯æŒæœ‰é™

åœ¨ Vue3 Composition API ä¸­ï¼Œç»„ä»¶æ ¹æ®é€»è¾‘åŠŸèƒ½æ¥ç»„ç»‡çš„ï¼Œ
ä¸€ä¸ªåŠŸèƒ½æ‰€å®šä¹‰çš„æ‰€æœ‰ API ä¼šæ”¾åœ¨ä¸€èµ·ï¼ˆæ›´åŠ çš„é«˜å†…èšï¼Œä½è€¦åˆï¼‰
å³ä½¿é¡¹ç›®å¾ˆå¤§ï¼ŒåŠŸèƒ½å¾ˆå¤šï¼Œæˆ‘ä»¬éƒ½èƒ½å¿«é€Ÿçš„å®šä½åˆ°è¿™ä¸ªåŠŸèƒ½æ‰€ç”¨åˆ°çš„æ‰€æœ‰ API.
ä½¿ç”¨å•ä¸ªmixinä¼¼ä¹é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä¸€ä¸ªç»„ä»¶æ··å…¥å¤§é‡ä¸åŒçš„ mixins çš„æ—¶å€™,å‘½åå†²çª æ•°æ®æ¥æºä¸æ¸…æ™°

åœ¨é€»è¾‘ç»„ç»‡å’Œé€»è¾‘å¤ç”¨æ–¹é¢ï¼ŒComposition APIæ˜¯ä¼˜äºOptions  API
å› ä¸ºComposition APIå‡ ä¹æ˜¯å‡½æ•°ï¼Œä¼šæœ‰æ›´å¥½çš„ç±»å‹æ¨æ–­ã€‚
Composition API å¯¹ tree-shaking å‹å¥½ï¼Œä»£ç ä¹Ÿæ›´å®¹æ˜“å‹ç¼©
Composition APIä¸­è§ä¸åˆ°thisçš„ä½¿ç”¨ï¼Œå‡å°‘äº†thisæŒ‡å‘ä¸æ˜çš„æƒ…å†µ
å¦‚æœæ˜¯å°å‹ç»„ä»¶ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨Options APIï¼Œä¹Ÿæ˜¯ååˆ†å‹å¥½çš„

Q: è¯´è¯´Vue 3.0ä¸­Treeshakingç‰¹æ€§ï¼Ÿä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ï¼Ÿ
A: Tree shaking æ˜¯ä¸€ç§é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–é¡¹ç›®æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯ï¼Œä¸“ä¸šæœ¯è¯­å« Dead code elimination
ç®€å•æ¥è®²ï¼Œå°±æ˜¯åœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç 
å¦‚æœæŠŠä»£ç æ‰“åŒ…æ¯”ä½œåˆ¶ä½œè›‹ç³•ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯æŠŠé¸¡è›‹ï¼ˆå¸¦å£³ï¼‰å…¨éƒ¨ä¸¢è¿›å»æ…æ‹Œï¼Œç„¶åæ”¾å…¥çƒ¤ç®±ï¼Œæœ€åæŠŠï¼ˆæ²¡æœ‰ç”¨çš„ï¼‰è›‹å£³å…¨éƒ¨æŒ‘é€‰å¹¶å‰”é™¤å‡ºå»
è€Œtreeshakingåˆ™æ˜¯ä¸€å¼€å§‹å°±æŠŠæœ‰ç”¨çš„è›‹ç™½è›‹é»„ï¼ˆimportï¼‰æ”¾å…¥æ…æ‹Œï¼Œæœ€åç›´æ¥ä½œå‡ºè›‹ç³•
ä¹Ÿå°±æ˜¯è¯´ ï¼Œtree shaking å…¶å®æ˜¯æ‰¾å‡ºä½¿ç”¨çš„ä»£ç 
åœ¨Vue2ä¸­ï¼Œæ— è®ºæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ã€‚ä¸»è¦åŸå› æ˜¯Vueå®ä¾‹åœ¨é¡¹ç›®ä¸­æ˜¯å•ä¾‹çš„ï¼Œæ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨åˆ°
è€ŒVue3æºç å¼•å…¥tree shakingç‰¹æ€§ï¼Œå°†å…¨å±€ API è¿›è¡Œåˆ†å—ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨æ‚¨çš„åŸºç¡€åŒ…ä¸­

Tree shakingæ˜¯åŸºäºES6æ¨¡æ¿è¯­æ³•ï¼ˆimportä¸exportsï¼‰ï¼Œä¸»è¦æ˜¯å€ŸåŠ©ES6æ¨¡å—çš„é™æ€ç¼–è¯‘æ€æƒ³ï¼Œåœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡

Tree shakingæ— éå°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š
ç¼–è¯‘é˜¶æ®µåˆ©ç”¨ES6 Moduleåˆ¤æ–­å“ªäº›æ¨¡å—å·²ç»åŠ è½½
åˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç 

é€šè¿‡Tree shakingï¼ŒVue3ç»™æˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š

å‡å°‘ç¨‹åºä½“ç§¯ï¼ˆæ›´å°ï¼‰
å‡å°‘ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼ˆæ›´å¿«ï¼‰
ä¾¿äºå°†æ¥å¯¹ç¨‹åºæ¶æ„è¿›è¡Œä¼˜åŒ–ï¼ˆæ›´å‹å¥½ï¼‰

Q: ç”¨Vue3.0 å†™è¿‡ç»„ä»¶å—ï¼Ÿå¦‚æœæƒ³å®ç°ä¸€ä¸ª Modalä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ
A: 

Q: ä¸ºä»€ä¹ˆdataå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡
A: æ ¹å®ä¾‹å¯¹è±¡dataå¯ä»¥æ˜¯å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼ˆæ ¹å®ä¾‹æ˜¯å•ä¾‹ï¼‰ï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®æ±¡æŸ“æƒ…å†µ
ç»„ä»¶å®ä¾‹å¯¹è±¡dataå¿…é¡»ä¸ºå‡½æ•°ï¼Œç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å¤šä¸ªç»„ä»¶å®ä¾‹å¯¹è±¡ä¹‹é—´å…±ç”¨ä¸€ä¸ªdataï¼Œäº§ç”Ÿæ•°æ®æ±¡æŸ“ã€‚
é‡‡ç”¨å‡½æ•°çš„å½¢å¼ï¼ŒinitDataæ—¶ä¼šå°†å…¶ä½œä¸ºå·¥å‚å‡½æ•°éƒ½ä¼šè¿”å›å…¨æ–°dataå¯¹è±¡

Q: SPAï¼ˆå•é¡µåº”ç”¨ï¼‰é¦–å±åŠ è½½é€Ÿåº¦æ…¢æ€ä¹ˆè§£å†³
A: åœ¨é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹ï¼Œå¯¼è‡´åŠ è½½é€Ÿåº¦æ…¢çš„å› ç´ å¯èƒ½å¦‚ä¸‹ï¼š
ç½‘ç»œå»¶æ—¶é—®é¢˜
èµ„æºæ–‡ä»¶ä½“ç§¯æ˜¯å¦è¿‡å¤§
èµ„æºæ˜¯å¦é‡å¤å‘é€è¯·æ±‚å»åŠ è½½äº†
åŠ è½½è„šæœ¬çš„æ—¶å€™ï¼Œæ¸²æŸ“å†…å®¹å µå¡äº†

å¸¸è§çš„å‡ ç§SPAé¦–å±ä¼˜åŒ–æ–¹å¼

å‡å°å…¥å£æ–‡ä»¶ç§¯
é™æ€èµ„æºæœ¬åœ°ç¼“å­˜
UIæ¡†æ¶æŒ‰éœ€åŠ è½½
å›¾ç‰‡èµ„æºçš„å‹ç¼©
ç»„ä»¶é‡å¤æ‰“åŒ…
å¼€å¯GZipå‹ç¼©
ä½¿ç”¨SSR

å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯
å¸¸ç”¨çš„æ‰‹æ®µæ˜¯è·¯ç”±æ‡’åŠ è½½ï¼ŒæŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œ
å¾…è·¯ç”±è¢«è¯·æ±‚çš„æ—¶å€™ä¼šå•ç‹¬æ‰“åŒ…è·¯ç”±ï¼Œä½¿å¾—å…¥å£æ–‡ä»¶å˜å°ï¼ŒåŠ è½½é€Ÿåº¦å¤§å¤§å¢åŠ 
ä»¥å‡½æ•°çš„å½¢å¼åŠ è½½è·¯ç”±ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå„è‡ªçš„è·¯ç”±æ–‡ä»¶åˆ†åˆ«æ‰“åŒ…ï¼Œåªæœ‰åœ¨è§£æç»™å®šçš„è·¯ç”±æ—¶ï¼Œæ‰ä¼šåŠ è½½è·¯ç”±ç»„ä»¶

é™æ€èµ„æºæœ¬åœ°ç¼“å­˜
åç«¯è¿”å›èµ„æºé—®é¢˜ï¼š
é‡‡ç”¨HTTPç¼“å­˜ï¼Œè®¾ç½®Cache-Controlï¼ŒLast-Modifiedï¼ŒEtagç­‰å“åº”å¤´
é‡‡ç”¨Service Workerç¦»çº¿ç¼“å­˜

UIæ¡†æ¶æŒ‰éœ€åŠ è½½: import { Button, Input, Pagination, Table, TableColumn, MessageBox } from 'element-ui';

ç»„ä»¶é‡å¤æ‰“åŒ…
è§£å†³æ–¹æ¡ˆï¼šåœ¨webpackçš„configæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹CommonsChunkPluginçš„é…ç½®
minChunksä¸º3è¡¨ç¤ºä¼šæŠŠä½¿ç”¨3æ¬¡åŠä»¥ä¸Šçš„åŒ…æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾è¿›å…¬å…±ä¾èµ–æ–‡ä»¶ï¼Œé¿å…äº†é‡å¤åŠ è½½ç»„ä»¶

å›¾ç‰‡èµ„æºçš„å‹ç¼©
å›¾ç‰‡èµ„æºè™½ç„¶ä¸åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä½†å®ƒå´æ˜¯å¯¹é¡µé¢æ€§èƒ½å½±å“æœ€å¤§çš„å› ç´ 
å¯¹äºæ‰€æœ‰çš„å›¾ç‰‡èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œé€‚å½“çš„å‹ç¼©
å¯¹é¡µé¢ä¸Šä½¿ç”¨åˆ°çš„iconï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿å­—ä½“å›¾æ ‡ï¼Œæˆ–è€…é›ªç¢§å›¾ï¼Œå°†ä¼—å¤šå°å›¾æ ‡åˆå¹¶åˆ°åŒä¸€å¼ å›¾ä¸Šï¼Œç”¨ä»¥å‡è½»httpè¯·æ±‚å‹åŠ›ã€‚

å¼€å¯GZipå‹ç¼©
åœ¨vue.config.jsä¸­å¼•å…¥å¹¶ä¿®æ”¹webpacké…ç½®:  plugins: [new CompressionPlugin({
                    test: /\.js$|\.html$|\.css/, //åŒ¹é…æ–‡ä»¶å
                    threshold: 10240, //å¯¹è¶…è¿‡10kçš„æ•°æ®è¿›è¡Œå‹ç¼©
                    deleteOriginalAssets: false //æ˜¯å¦åˆ é™¤åŸæ–‡ä»¶
                })]


ä½¿ç”¨SSR
SSRï¼ˆServer side ï¼‰ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç»„ä»¶æˆ–é¡µé¢é€šè¿‡æœåŠ¡å™¨ç”Ÿæˆhtmlå­—ç¬¦ä¸²ï¼Œå†å‘é€åˆ°æµè§ˆå™¨
å‡å°‘é¦–å±æ¸²æŸ“æ—¶é—´çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ€»çš„æ¥è®²å¯ä»¥åˆ†æˆä¸¤å¤§éƒ¨åˆ† ï¼šèµ„æºåŠ è½½ä¼˜åŒ– å’Œ é¡µé¢æ¸²æŸ“ä¼˜åŒ–
ä»å¤´æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“æ˜¯å¾ˆå¤æ‚çš„ï¼Œvueåº”ç”¨å»ºè®®ä½¿ç”¨Nuxt.jså®ç°æœåŠ¡ç«¯æ¸²æŸ“

Q:ä¸ºä»€ä¹ˆVueä¸­çš„v-ifå’Œv-forä¸å»ºè®®ä¸€èµ·ç”¨?
A: v-if æŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å› trueå€¼çš„æ—¶å€™è¢«æ¸²æŸ“
v-for æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚v-for æŒ‡ä»¤éœ€è¦ä½¿ç”¨ item in items å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ items æ˜¯æºæ•°æ®æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œè€Œ item åˆ™æ˜¯è¢«è¿­ä»£çš„æ•°ç»„å…ƒç´ çš„åˆ«å
åœ¨ v-for çš„æ—¶å€™ï¼Œå»ºè®®è®¾ç½®keyå€¼ï¼Œå¹¶ä¸”ä¿è¯æ¯ä¸ªkeyå€¼æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè¿™ä¾¿äºdiffç®—æ³•è¿›è¡Œä¼˜åŒ–
v-forä¼˜å…ˆçº§æ˜¯æ¯”v-ifé«˜

æ°¸è¿œä¸è¦æŠŠ v-if å’Œ v-for åŒæ—¶ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå¸¦æ¥æ€§èƒ½æ–¹é¢çš„æµªè´¹ï¼ˆæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå…ˆå¾ªç¯å†è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼‰
å¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œåˆ™åœ¨å¤–å±‚åµŒå¥—templateï¼ˆé¡µé¢æ¸²æŸ“ä¸ç”ŸæˆdomèŠ‚ç‚¹ï¼‰ï¼Œåœ¨è¿™ä¸€å±‚è¿›è¡Œv-ifåˆ¤æ–­ï¼Œç„¶ååœ¨å†…éƒ¨è¿›è¡Œv-forå¾ªç¯
å¦‚æœæ¡ä»¶å‡ºç°åœ¨å¾ªç¯å†…éƒ¨ï¼Œå¯é€šè¿‡è®¡ç®—å±æ€§computedæå‰è¿‡æ»¤æ‰é‚£äº›ä¸éœ€è¦æ˜¾ç¤ºçš„é¡¹

3.x ç‰ˆæœ¬ä¸­ v-if æ€»æ˜¯ä¼˜å…ˆäº v-for ç”Ÿæ•ˆã€‚

Q: Vueä¸­ç»„ä»¶å’Œæ’ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
A: ç»„ä»¶çš„ä¼˜åŠ¿
é™ä½æ•´ä¸ªç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œåœ¨ä¿æŒæ¥å£ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›¿æ¢ä¸åŒçš„ç»„ä»¶å¿«é€Ÿå®Œæˆéœ€æ±‚ï¼Œä¾‹å¦‚è¾“å…¥æ¡†ï¼Œå¯ä»¥æ›¿æ¢ä¸ºæ—¥å†ã€æ—¶é—´ã€èŒƒå›´ç­‰ç»„ä»¶ä½œå…·ä½“çš„å®ç°
è°ƒè¯•æ–¹ä¾¿ï¼Œç”±äºæ•´ä¸ªç³»ç»Ÿæ˜¯é€šè¿‡ç»„ä»¶ç»„åˆèµ·æ¥çš„ï¼Œåœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨æ’é™¤æ³•ç›´æ¥ç§»é™¤ç»„ä»¶ï¼Œæˆ–è€…æ ¹æ®æŠ¥é”™çš„ç»„ä»¶å¿«é€Ÿå®šä½é—®é¢˜ï¼Œ
ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¿«é€Ÿå®šä½ï¼Œæ˜¯å› ä¸ºæ¯ä¸ªç»„ä»¶ä¹‹é—´ä½è€¦åˆï¼ŒèŒè´£å•ä¸€ï¼Œæ‰€ä»¥é€»è¾‘ä¼šæ¯”åˆ†ææ•´ä¸ªç³»ç»Ÿè¦ç®€å•
æé«˜å¯ç»´æŠ¤æ€§ï¼Œç”±äºæ¯ä¸ªç»„ä»¶çš„èŒè´£å•ä¸€ï¼Œå¹¶ä¸”ç»„ä»¶åœ¨ç³»ç»Ÿä¸­æ˜¯è¢«å¤ç”¨çš„ï¼Œæ‰€ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å¯è·å¾—ç³»ç»Ÿçš„æ•´ä½“å‡çº§

æ’ä»¶é€šå¸¸ç”¨æ¥ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½ã€‚æ’ä»¶çš„åŠŸèƒ½èŒƒå›´æ²¡æœ‰ä¸¥æ ¼çš„é™åˆ¶â€”â€”ä¸€èˆ¬æœ‰ä¸‹é¢å‡ ç§ï¼š
æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€…å±æ€§ã€‚å¦‚: vue-custom-element
æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤/è¿‡æ»¤å™¨/è¿‡æ¸¡ç­‰ã€‚å¦‚ vue-touch
é€šè¿‡å…¨å±€æ··å…¥æ¥æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ã€‚å¦‚ vue-router
æ·»åŠ  Vue å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° Vue.prototype ä¸Šå®ç°ã€‚
ä¸€ä¸ªåº“ï¼Œæä¾›è‡ªå·±çš„ APIï¼ŒåŒæ—¶æä¾›ä¸Šé¢æåˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½ã€‚å¦‚ vue-router

ä¸¤è€…çš„åŒºåˆ«ä¸»è¦è¡¨ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š 
ç¼–å†™å½¢å¼: vueå•æ–‡ä»¶ / vueæ’ä»¶çš„å®ç°åº”è¯¥æš´éœ²ä¸€ä¸ª install æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Vue æ„é€ å™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡
æ³¨å†Œå½¢å¼: ç»„ä»¶æ³¨å†Œä¸»è¦åˆ†ä¸ºå…¨å±€æ³¨å†Œä¸å±€éƒ¨æ³¨å†Œ / æ’ä»¶çš„æ³¨å†Œé€šè¿‡Vue.use()çš„æ–¹å¼è¿›è¡Œæ³¨å†Œï¼ˆå®‰è£…ï¼‰ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ’ä»¶çš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰æ‹©çš„é…ç½®é¡¹
        æ³¨å†Œæ’ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åœ¨è°ƒç”¨ new Vue() å¯åŠ¨åº”ç”¨ä¹‹å‰å®Œæˆ
ä½¿ç”¨åœºæ™¯: ç»„ä»¶ (Component) æ˜¯ç”¨æ¥æ„æˆä½ çš„ App çš„ä¸šåŠ¡æ¨¡å—ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ App.vue
æ’ä»¶ (Plugin) æ˜¯ç”¨æ¥å¢å¼ºä½ çš„æŠ€æœ¯æ ˆçš„åŠŸèƒ½æ¨¡å—ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ Vue æœ¬èº«

Q:  è¯´è¯´ä½ å¯¹slotçš„ç†è§£ï¼Ÿslotä½¿ç”¨åœºæ™¯æœ‰å“ªäº›?
A: åœ¨HTMLä¸­ slot å…ƒç´  ï¼Œä½œä¸º Web Components æŠ€æœ¯å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯Webç»„ä»¶å†…çš„ä¸€ä¸ªå ä½ç¬¦
ä½¿ç”¨åœºæ™¯ï¼š é€šè¿‡æ’æ§½å¯ä»¥è®©ç”¨æˆ·å¯ä»¥æ‹“å±•ç»„ä»¶ï¼Œå»æ›´å¥½åœ°å¤ç”¨ç»„ä»¶å’Œå¯¹å…¶åšå®šåˆ¶åŒ–å¤„ç†
å¦‚æœçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨åˆ°ä¸€ä¸ªå¤ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œè·å–è¿™ä¸ªç»„ä»¶åœ¨ä¸åŒçš„åœ°æ–¹æœ‰å°‘é‡çš„æ›´æ”¹ï¼Œå¦‚æœå»é‡å†™ç»„ä»¶æ˜¯ä¸€ä»¶ä¸æ˜æ™ºçš„äº‹æƒ…
é€šè¿‡slotæ’æ§½å‘ç»„ä»¶å†…éƒ¨æŒ‡å®šä½ç½®ä¼ é€’å†…å®¹ï¼Œå®Œæˆè¿™ä¸ªå¤ç”¨ç»„ä»¶åœ¨ä¸åŒåœºæ™¯çš„åº”ç”¨
æ¯”å¦‚å¸ƒå±€ç»„ä»¶ã€è¡¨æ ¼åˆ—ã€ä¸‹æ‹‰é€‰ã€å¼¹æ¡†æ˜¾ç¤ºå†…å®¹ç­‰
é»˜è®¤æ’æ§½
å…·åæ’æ§½
ä½œç”¨åŸŸæ’æ§½ 
ä½œç”¨åŸŸæ’æ§½ä¸­çˆ¶ç»„ä»¶èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶çš„å€¼æ˜¯å› ä¸ºåœ¨renderSlotçš„æ—¶å€™æ‰§è¡Œä¼šä¼ å…¥propsï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°_tç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ
çˆ¶ç»„ä»¶åˆ™èƒ½å¤Ÿå¾—åˆ°å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼


Qï¼š äº†è§£è¿‡vueä¸­çš„diffç®—æ³•å—ï¼Ÿè¯´è¯´çœ‹ 
Aï¼š diff ç®—æ³•æ˜¯ä¸€ç§é€šè¿‡åŒå±‚çš„æ ‘èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒçš„é«˜æ•ˆç®—æ³•
å…¶æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š
æ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒ
åœ¨diffæ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¾ªç¯ä»ä¸¤è¾¹å‘ä¸­é—´æ¯”è¾ƒ
diff ç®—æ³•çš„åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½æœ‰åº”ç”¨ï¼Œåœ¨ vue ä¸­ï¼Œä½œç”¨äºè™šæ‹Ÿ dom æ¸²æŸ“æˆçœŸå® dom çš„æ–°æ—§ VNode èŠ‚ç‚¹æ¯”è¾ƒ
diffæ•´ä½“ç­–ç•¥ä¸ºï¼šæ·±åº¦ä¼˜å…ˆï¼ŒåŒå±‚æ¯”è¾ƒ

å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè®¢é˜…è€…watcherå°±ä¼šè°ƒç”¨patchç»™çœŸå®çš„DOMæ‰“è¡¥ä¸
æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸ä¸€æ ·ï¼Œå½“ä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œç›´æ¥åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œåˆ é™¤æ—§èŠ‚ç‚¹
æ²¡æœ‰æ—§èŠ‚ç‚¹ï¼Œè¯´æ˜æ˜¯é¡µé¢åˆšå¼€å§‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ­¤æ—¶ï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”è¾ƒäº†ï¼Œç›´æ¥å…¨æ˜¯æ–°å»ºï¼Œæ‰€ä»¥åªè°ƒç”¨ createElm
æ²¡æœ‰æ–°èŠ‚ç‚¹ï¼Œç›´æ¥è§¦å‘æ—§èŠ‚ç‚¹çš„destoryé’©å­
æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸€æ ·ï¼Œé€šè¿‡ sameVnode åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ä¸€æ ·ï¼Œä¸€æ ·æ—¶ï¼Œç›´æ¥è°ƒç”¨ patchVnode å»å¤„ç†è¿™ä¸¤ä¸ªèŠ‚ç‚¹

patchVnodeåšäº†ä»¥ä¸‹æ“ä½œï¼š
æ‰¾åˆ°å¯¹åº”çš„çœŸå®domï¼Œç§°ä¸ºel
å¦‚æœéƒ½æœ‰éƒ½æœ‰æ–‡æœ¬èŠ‚ç‚¹ä¸”ä¸ç›¸ç­‰ï¼Œå°†elæ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸ºVnodeçš„æ–‡æœ¬èŠ‚ç‚¹
å¦‚æœoldVnodeæœ‰å­èŠ‚ç‚¹è€ŒVNodeæ²¡æœ‰ï¼Œåˆ™åˆ é™¤elå­èŠ‚ç‚¹
å¦‚æœoldVnodeæ²¡æœ‰å­èŠ‚ç‚¹è€ŒVNodeæœ‰ï¼Œåˆ™å°†VNodeçš„å­èŠ‚ç‚¹çœŸå®åŒ–åæ·»åŠ åˆ°el
å¦‚æœä¸¤è€…éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡ŒupdateChildrenå‡½æ•°æ¯”è¾ƒå­èŠ‚ç‚¹
updateChildrenä¸»è¦åšäº†ä»¥ä¸‹æ“ä½œï¼š
è®¾ç½®æ–°æ—§VNodeçš„å¤´å°¾æŒ‡é’ˆ
æ–°æ—§å¤´å°¾æŒ‡é’ˆè¿›è¡Œæ¯”è¾ƒï¼Œå¾ªç¯å‘ä¸­é—´é æ‹¢ï¼Œæ ¹æ®æƒ…å†µè°ƒç”¨patchVnodeè¿›è¡Œpatché‡å¤æµç¨‹ã€
è°ƒç”¨createElemåˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œä»å“ˆå¸Œè¡¨å¯»æ‰¾ keyä¸€è‡´çš„VNode èŠ‚ç‚¹å†åˆ†æƒ…å†µæ“ä½œ

updateChildrenç­–ç•¥ï¼š 
å½“æ–°è€ VNode èŠ‚ç‚¹çš„ start ç›¸åŒæ—¶ï¼Œç›´æ¥ patchVnode ï¼ŒåŒæ—¶æ–°è€ VNode èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•éƒ½åŠ  1
å½“æ–°è€ VNode èŠ‚ç‚¹çš„ endç›¸åŒæ—¶ï¼ŒåŒæ ·ç›´æ¥ patchVnode ï¼ŒåŒæ—¶æ–°è€ VNode èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•éƒ½å‡ 1
å½“è€ VNode èŠ‚ç‚¹çš„ start å’Œæ–° VNode èŠ‚ç‚¹çš„ end ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ patchVnode åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® dom èŠ‚ç‚¹ç§»åŠ¨åˆ° oldEndVnode çš„åé¢ï¼ŒåŒæ—¶è€ VNode èŠ‚ç‚¹å¼€å§‹ç´¢å¼•åŠ  1ï¼Œæ–° VNode èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•å‡ 1
å½“è€ VNode èŠ‚ç‚¹çš„ end å’Œæ–° VNode èŠ‚ç‚¹çš„ start ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ patchVnode åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® dom èŠ‚ç‚¹ç§»åŠ¨åˆ° oldStartVnode çš„å‰é¢ï¼ŒåŒæ—¶è€ VNode èŠ‚ç‚¹ç»“æŸç´¢å¼•å‡ 1ï¼Œæ–° VNode èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•åŠ  1
å¦‚æœéƒ½ä¸æ»¡è¶³ä»¥ä¸Šå››ç§æƒ…å½¢ï¼Œé‚£è¯´æ˜æ²¡æœ‰ç›¸åŒçš„èŠ‚ç‚¹å¯ä»¥å¤ç”¨ï¼Œåˆ™ä¼šåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
ä»æ—§çš„ VNode ä¸º key å€¼ï¼Œå¯¹åº” index åºåˆ—ä¸º value å€¼çš„å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸ newStartVnode ä¸€è‡´ key çš„æ—§çš„ VNode èŠ‚ç‚¹ï¼Œå†è¿›è¡ŒpatchVnode ï¼ŒåŒæ—¶å°†è¿™ä¸ªçœŸå® dom ç§»åŠ¨åˆ° oldStartVnode å¯¹åº”çš„çœŸå® dom çš„å‰é¢
è°ƒç”¨ createElm åˆ›å»ºä¸€ä¸ªæ–°çš„ dom èŠ‚ç‚¹æ”¾åˆ°å½“å‰ newStartIdx çš„ä½ç½®

Qï¼š ä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ
Aï¼š åç«¯æ¥å£é”™è¯¯ ï¼š axiosçš„interceptorå®ç°ç½‘ç»œè¯·æ±‚çš„responseå…ˆè¿›è¡Œä¸€å±‚æ‹¦æˆª
ä»£ç ä¸­æœ¬èº«é€»è¾‘é”™è¯¯

Q: vue3 diff å’Œreact ç®—æ³•çš„åŒºåˆ«ï¼Ÿ
Aï¼š React å’Œ Vue3 çš„æ ¸å¿ƒåŒºåˆ«ä¸åœ¨ diff ç®—æ³•ç»†èŠ‚ï¼Œè€Œåœ¨äºâ€œæ›´æ–°é©±åŠ¨æ¨¡å‹â€ï¼š
React æ˜¯ã€çŠ¶æ€é©±åŠ¨ + å…¨é‡é‡æ–° diffã€ï¼ŒVue3 æ˜¯ã€å“åº”å¼é©±åŠ¨ + ç²¾ç¡®æ›´æ–°ã€ã€‚

1ï¸âƒ£ React Diffï¼ˆåè°ƒ / Reconciliationï¼‰ï¼šReact ä¸è¿½æ±‚â€œæœ€å° DOM æ“ä½œâ€ï¼Œè€Œæ˜¯â€œå¯ä¸­æ–­ã€å¯è°ƒåº¦â€
2ï¸âƒ£ Vue3 Diffï¼ˆCompiler + Runtimeï¼‰ï¼šé™æ€æå‡ Patch Flags Block Treeï¼š Vue3 diff æ¬¡æ•°æ›´å°‘

Concurrent / Scheduler å±‚é¢çš„å·®å¼‚ï¼ˆé«˜çº§ï¼‰
React å¯ä¸­æ–­æ¸²æŸ“ ä¼˜å…ˆçº§è°ƒåº¦ Concurrent Mode: ä»¥ç”¨æˆ·äº¤äº’ä¸ºä¸­å¿ƒ
Vue3åŒæ­¥æ›´æ–°ä¸ºä¸» æ‰¹å¤„ç†+å¾®ä»»åŠ¡ scheduler è¾ƒè½»: ä»¥æœ€å°æ›´æ–°ä¸ºç›®æ ‡

React çš„ diff æ˜¯â€œç®—å‡ºæ¥å“ªäº›å˜äº†â€ï¼Œ
Vue3 çš„ diff æ˜¯â€œæå‰çŸ¥é“å“ªé‡Œä¼šå˜â€ï¼›å‰è€…é è°ƒåº¦èƒ½åŠ›å…œåº•ï¼Œåè€…é ç¼–è¯‘æœŸå’Œå“åº”å¼ç³»ç»Ÿå‡å°‘å·¥ä½œé‡


Qï¼šä¸ºä»€ä¹ˆ React éœ€è¦ memo / useCallbackï¼Ÿ
Aï¼šå› ä¸º React é»˜è®¤æ˜¯â€œå‡½æ•°é‡è·‘æ¨¡å‹â€ï¼Œéœ€è¦é€šè¿‡ memo æ‰‹åŠ¨é˜»æ–­æ— æ„ä¹‰çš„ re-renderã€‚ 
è€Œvueå“åº”å¼ç³»ç»Ÿå¤©ç„¶é¿å…äº†è¿™ç±»é—®é¢˜ã€‚

Q: ä»€ä¹ˆæ—¶å€™é€‰ Reactï¼Ÿä»€ä¹ˆæ—¶å€™é€‰ Vueï¼Ÿ
A:  å¤æ‚äº¤äº’ / å¤šçŠ¶æ€æµ	React
è¡¨å• / ç®¡ç†åå°	Vue
éœ€è¦è‡ªå®šä¹‰æ¸²æŸ“	React
è¿½æ±‚ä½å¿ƒæ™ºè´Ÿæ‹…	Vue


Q:react fiber
A: ä¸ºä»€ä¹ˆéœ€è¦ Fiber: 
setStateä¸å¯ä¸­æ–­
JS é•¿ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹
æ»šåŠ¨ / è¾“å…¥æ‰å¸§
æ— æ³•è°ƒåº¦ä¼˜å…ˆçº§
ğŸ“Œ æœ¬è´¨é—®é¢˜ï¼šReact æ— æ³•æ§åˆ¶â€œä»€ä¹ˆæ—¶å€™æ¸²æŸ“â€
Fiber æ˜¯ä»€ä¹ˆ:
Fiber æ˜¯ä¸€ç§â€œå¯ä¸­æ–­ã€å¯æ¢å¤ã€å¯è°ƒåº¦çš„è™šæ‹Ÿ DOM æ‰§è¡Œæ¨¡å‹â€ï¼Œ
åŒæ—¶ä¹Ÿæ˜¯ React å†…éƒ¨çš„ä¸€ç§æ•°æ®ç»“æ„
Fiber åˆ°åº•è§£å†³äº†ä»€ä¹ˆ:
ä¸­æ–­æ¸²æŸ“
ä¼˜å…ˆçº§è°ƒåº¦
æ¢å¤æ‰§è¡Œ
å¹¶å‘æ¨¡å¼
Fiber çš„æ ¸å¿ƒæ€æƒ³:
1ï¸âƒ£ æŠŠâ€œé€’å½’â€å˜æˆâ€œé“¾è¡¨ + å¾ªç¯â€:ä¸€æ—¦å¼€å§‹ï¼Œä¸èƒ½åœã€‚
fiberå¯éšæ—¶æš‚åœ / æ¢å¤

Fiber çš„æ‰§è¡Œæµç¨‹: 
1. Render Phaseï¼ˆå¯ä¸­æ–­ï¼‰
æ„å»º Fiber Tree è®¡ç®—å˜æ›´ ä¸æ“ä½œ DOM
beginWork â†’
completeWork
2. Commit Phaseï¼ˆä¸å¯ä¸­æ–­ï¼‰
beforeMutation
mutation
layout
æ‰§è¡Œ DOM æ›´æ–°
è°ƒç”¨ç”Ÿå‘½å‘¨æœŸ
useLayoutEffect

è°ƒåº¦æœºåˆ¶ï¼ˆSchedulerï¼‰
ç»™ä»»åŠ¡æ‰“ä¼˜å…ˆçº§ï¼ˆlanesï¼‰
ä½¿ç”¨ MessageChannel / setTimeout
åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´å·¥ä½œ

Fiber å…è®¸ React æŠŠä¸€æ¬¡å¤§æ›´æ–°æ‹†æˆå¾ˆå¤šå°ç‰‡ï¼Œ
åœ¨ä¿è¯äº¤äº’ä¼˜å…ˆçš„å‰æä¸‹å®Œæˆæ¸²æŸ“ï¼Œæ‰€ä»¥ä¸æ˜¯è¿½æ±‚æœ€å°‘è®¡ç®—ï¼Œè€Œæ˜¯è¿½æ±‚â€œä¸å¡â€ã€‚

React Fiber çš„æœ¬è´¨ä¸æ˜¯æ›´å¿«æ¸²æŸ“ï¼Œè€Œæ˜¯è®©æ¸²æŸ“â€œå¯æ§â€ï¼Œä»è€Œä¿è¯å¤æ‚åº”ç”¨åœ¨é«˜è´Ÿè½½ä¸‹ä»ç„¶å¯äº¤äº’ã€‚

setState è§¦å‘çš„ä¸æ˜¯ renderï¼Œè€Œæ˜¯ï¼šæ ‡è®°ä¼˜å…ˆçº§ï¼ˆlaneï¼‰ è¿›å…¥è°ƒåº¦é˜Ÿåˆ— ç­‰Scheduler æ‰§è¡Œ
Hooks åªæ˜¯â€œæè¿°æ›´æ–°â€ï¼ŒFiber å†³å®šâ€œä»€ä¹ˆæ—¶å€™æ‰§è¡Œâ€

Q: Fiber å’Œ Virtual DOM æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ
A: Virtual DOM æ˜¯æ•°æ®ç»“æ„ï¼ŒFiber æ˜¯æ‰§è¡Œæ¶æ„ï¼›Fiber åŒ…å« VDOMï¼Œä½†ä¸ç­‰åŒäºå®ƒã€‚


Q: Concurrent Mode é»˜è®¤å¼€å¯äº†å—ï¼Ÿ
A: React 18 é»˜è®¤å¼€å¯éƒ¨åˆ†å¹¶å‘ç‰¹æ€§ï¼Œä½†å®Œæ•´çš„å¹¶å‘æ¸²æŸ“éœ€è¦ä½¿ç”¨å¹¶å‘ APIï¼Œæ¯”å¦‚ startTransitionã€‚

Q: ä¸ºä»€ä¹ˆ commit ä¸èƒ½ä¸­æ–­ï¼Ÿ
A: å› ä¸º DOM æ“ä½œå¿…é¡»ä¿æŒä¸€è‡´æ€§ï¼Œä¸­æ–­ä¼šé€ æˆ UI ä¸ä¸€è‡´ã€‚

Q: Fiber + Hooks?
A: Hooks å¹¶ä¸æ˜¯â€œæŒ‚åœ¨ç»„ä»¶ä¸Šçš„â€ï¼Œè€Œæ˜¯æŒ‚åœ¨ Fiber èŠ‚ç‚¹ä¸Šçš„ï¼›
Hooks çš„æ‰§è¡Œé¡ºåºç”± Fiber çš„ render é˜¶æ®µä¸¥æ ¼æ§åˆ¶ï¼Œå¹¶é€šè¿‡é“¾è¡¨ç»“æ„åœ¨å¤šæ¬¡ render ä¹‹é—´å¤ç”¨
Hooks å­˜åœ¨äºfiber.memoizedState

Qï¼šä¸ºä»€ä¹ˆ Hooks å¿…é¡»â€œæŒ‰é¡ºåºè°ƒç”¨â€ï¼Ÿ
Aï¼šReact ä¸æ˜¯é€šè¿‡å˜é‡åï¼Œè€Œæ˜¯é€šè¿‡â€œè°ƒç”¨é¡ºåºâ€æ¥å®šä½ hookï¼›å¦‚æœé¡ºåºå˜åŒ–ï¼Œå°±ä¼šå¯¼è‡´ state é”™ä½ã€‚

Qï¼šHooks æ‰§è¡Œå‘ç”Ÿåœ¨ Fiber çš„å“ªä¸ªé˜¶æ®µï¼Ÿ
Aï¼šHooks æ‰§è¡Œå‘ç”Ÿåœ¨ Fiber çš„ render é˜¶æ®µï¼ˆbeginWorkï¼‰ï¼Œè€Œä¸æ˜¯ commit é˜¶æ®µã€‚

Qï¼š ä¸ºä»€ä¹ˆ React 18 çš„ batching æ›´å¼ºï¼Ÿ
A:å¤šä¸ª setState è¢«åˆå¹¶è¿›åŒä¸€ä¸ª render
updateQueue åœ¨ render é˜¶æ®µç»Ÿä¸€å¤„ç†

Q: ä¸ºä»€ä¹ˆ Hooks èƒ½â€œè·¨ render ä¿å­˜çŠ¶æ€â€ï¼Ÿ
A: å› ä¸º Fiber èŠ‚ç‚¹åœ¨å¤šæ¬¡ render ä¹‹é—´å¤ç”¨ï¼ŒHooks é“¾è¡¨ä¹Ÿéš Fiber æŒä¹…å­˜åœ¨ï¼Œè€Œä¸æ˜¯éšç€å‡½æ•°æ‰§è¡Œé”€æ¯ã€‚

Q: Concurrent Mode ä¸‹ Hooks ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–
A: render é˜¶æ®µå¯èƒ½è¢«æ‰“æ–­ã€ä¸¢å¼ƒã€é‡æ¥ï¼Œä½† commit é˜¶æ®µåªä¼šæ‰§è¡Œä¸€æ¬¡.render ä¸­çš„ hooks æ‰§è¡Œ å¯èƒ½ç™½è·‘
effect ä¸ä¼šä¹±æ‰§è¡Œ state ä¸ä¼šè¢«æ±¡æŸ“ React ç”¨ åŒç¼“å†² Fiber Treeï¼ˆcurrent / workInProgressï¼‰ ä¿è¯ä¸€è‡´æ€§ã€‚

Q: Hooks ä¸ºä»€ä¹ˆä¸èƒ½å†™åœ¨å¾ªç¯é‡Œï¼Ÿ
A: å› ä¸º Hooks é€šè¿‡é¡ºåºç´¢å¼•å®šä½ï¼Œå¾ªç¯ä¼šç ´åé“¾è¡¨ä¸€è‡´æ€§ã€‚

Q: useRef ä¸ºä»€ä¹ˆä¸ä¼šè§¦å‘ renderï¼Ÿ
A: å› ä¸º ref çš„å˜æ›´ä¸ä¼šè¿›å…¥ updateQueueï¼Œä¸ä¼šè§¦å‘ Fiber è°ƒåº¦ã€‚

Q: ä¸ºä»€ä¹ˆ render é˜¶æ®µä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Ÿ
A: å› ä¸º render å¯èƒ½è¢«ä¸­æ–­æˆ–ä¸¢å¼ƒï¼Œå‰¯ä½œç”¨ä¼šè¢«é‡å¤æˆ–é”™ä¹±æ‰§è¡Œã€‚

Fiber å†³å®šâ€œä»€ä¹ˆæ—¶å€™æ¸²æŸ“â€ï¼ŒHooks å†³å®šâ€œæ¸²æŸ“ç”¨ä»€ä¹ˆçŠ¶æ€â€ï¼›Hooks æœ¬è´¨æ˜¯ Fiber ä¸Šçš„ä¸€æ¡çŠ¶æ€é“¾ï¼Œè€Œä¸æ˜¯ç»„ä»¶çº§å˜é‡ã€‚

Q: useEffect ä¸ä¹Ÿæ˜¯hookå—ï¼Ÿ ä¸ºä»€ä¹ˆæ‰§è¡Œä¸æ˜¯åœ¨renderé˜¶æ®µè€Œæ˜¯åœ¨commité˜¶æ®µå‘¢
A: useEffect æ˜¯ Hookï¼Œä½†å®ƒçš„æ‰§è¡Œè¢«è®¾è®¡åœ¨ commit é˜¶æ®µçš„â€œpassive effect é˜¶æ®µâ€ï¼Œ
å› ä¸ºå®ƒå¯èƒ½åŒ…å«å‰¯ä½œç”¨ï¼Œè€Œ render é˜¶æ®µå¯èƒ½è¢«ä¸­æ–­æˆ–ä¸¢å¼ƒ

render é˜¶æ®µï¼ˆbeginWorkï¼‰
ä½œç”¨ï¼šè®¡ç®— UI â†’ ç”Ÿæˆ Fiber Tree
å¯ä¸­æ–­ / å¯æš‚åœ
ä¸æ“ä½œ DOM
Hooks æ‰§è¡Œï¼šuseState / useReducer / useMemo / useRef â†’ è®¡ç®—çŠ¶æ€/å€¼
ä¸èƒ½åšå‰¯ä½œç”¨
âŒ ä¸èƒ½åœ¨ render åš DOM æ“ä½œæˆ–ç½‘ç»œè¯·æ±‚ï¼Œå¦åˆ™åœ¨ä¸­æ–­ render åä¼šå‡ºç°ä¸ä¸€è‡´ã€‚

commit é˜¶æ®µ
ä½œç”¨ï¼šçœŸæ­£æ›´æ–° DOM å’Œç”Ÿå‘½å‘¨æœŸè°ƒç”¨
ä¸å¯ä¸­æ–­
commit é˜¶æ®µåˆ†ä¸‰æ­¥ï¼š
beforeMutationï¼ˆgetSnapshotBeforeUpdateï¼‰
mutationï¼ˆå®é™… DOM æ›´æ–°ï¼‰
layoutï¼ˆuseLayoutEffectï¼‰
passive effectï¼ˆuseEffectï¼‰ åœ¨ commit ç»“æŸåï¼Œæµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œã€‚

Q: ä¸ºä»€ä¹ˆ useEffect ä¸æ”¾åœ¨ renderï¼Ÿ
A: render å¯ä¸­æ–­
Concurrent Mode ä¸‹ render å¯èƒ½è¢«æš‚åœæˆ–ä¸¢å¼ƒ
å¦‚æœå‰¯ä½œç”¨æ”¾åœ¨ renderï¼Œå¯èƒ½æ‰§è¡Œå¤šæ¬¡æˆ–è¢«ä¸¢å¼ƒ â†’ çŠ¶æ€ä¸ä¸€è‡´

ä¿è¯ UI ä¸€è‡´æ€§
render é˜¶æ®µåªè´Ÿè´£â€œè®¡ç®— UIâ€ï¼Œä¸ç›´æ¥æ”¹å˜å¤–éƒ¨ç¯å¢ƒ

æ€§èƒ½è€ƒè™‘
å¤§é‡å‰¯ä½œç”¨æ“ä½œï¼ˆç½‘ç»œ / DOMï¼‰æ”¾ render ä¼šé˜»å¡ä¸»çº¿ç¨‹
ç±»å‹	æ‰§è¡Œé˜¶æ®µ	æ˜¯å¦å‰¯ä½œç”¨
useState / useReducer	render	âŒ
useMemo / useCallback	render	âŒ
useRef	render	âŒ
useLayoutEffect	commitï¼ˆlayoutï¼‰	âœ… åŒæ­¥å‰¯ä½œç”¨
useEffect	commitï¼ˆpassiveï¼‰	âœ… å¼‚æ­¥å‰¯ä½œç”¨

Q: react 18çš„å¹¶å‘ Concurrentåˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªæ¨¡å¼å‡ºç°
A: React 18 çš„ Concurrent æ¨¡å¼æ˜¯ä¸€ç§å¯ä¸­æ–­ã€å¯è°ƒåº¦ã€å¯ä¼˜å…ˆçº§æ§åˆ¶çš„æ¸²æŸ“æ¨¡å¼ï¼Œ
å®ƒè®© React å¯ä»¥åœ¨ç”¨æˆ·äº¤äº’å’Œå¤§ä»»åŠ¡ä¹‹é—´â€œåˆ†ç‰‡æ‰§è¡Œæ¸²æŸ“â€ï¼Œä¿è¯ç•Œé¢æµç•…è€Œä¸ä¼šè¢«é˜»å¡

Q: Concurrent æ¨¡å¼çš„æœ¬è´¨
A: å¯ä¸­æ–­
æ¸²æŸ“ä»»åŠ¡å¯ä»¥è¢«æ‰“æ–­ï¼Œå…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡
Fiber render é˜¶æ®µæ”¯æŒä¸­æ–­å’Œæ¢å¤
è°ƒåº¦ä¼˜å…ˆçº§
React å†…éƒ¨ç»™æ¯ä¸ªæ›´æ–°åˆ†é… laneï¼ˆä¼˜å…ˆçº§æ ‡è®°ï¼‰
é«˜ä¼˜å…ˆçº§æ›´æ–°å¯ä»¥æŠ¢å ä½ä¼˜å…ˆçº§æ›´æ–°
åˆ†ç‰‡æ¸²æŸ“ï¼ˆTime Slicing,ä½¿ç”¨ MessageChannel æˆ– requestIdleCallback è°ƒåº¦ï¼‰
å°†ä¸€æ¬¡å¤§æ›´æ–°æ‹†æˆå°ç‰‡æ®µ
æ¯ç‰‡å°ä»»åŠ¡æ‰§è¡Œåï¼Œæµè§ˆå™¨æœ‰æœºä¼šå¤„ç†è¾“å…¥ã€åŠ¨ç”»ç­‰ä»»åŠ¡
ğŸ“Œ Fiber Tree + Scheduler æ˜¯åŸºç¡€

Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæ‰€æœ‰æ›´æ–°æ‹†æˆå°ä»»åŠ¡ï¼Ÿ
A: å› ä¸ºæ‹†å¤ªç»†ä¼šå¢åŠ è°ƒåº¦å¼€é”€ï¼Œéœ€è¦å¹³è¡¡åˆ†ç‰‡ç²’åº¦å’Œè°ƒåº¦æˆæœ¬ã€‚

Q: Concurrent æ¨¡å¼ä¼šå½±å“ useEffect æ‰§è¡Œå—ï¼Ÿ
A: ä¸ä¼šï¼ŒuseEffect ä»åœ¨ commit åæ‰§è¡Œã€‚åªæ˜¯ render é˜¶æ®µå¯èƒ½è¢«ä¸­æ–­é‡åšã€‚

Q: å¼‚æ­¥å‡½æ•°é‡Œé¢çš„setStateèƒ½æ‰¹å¤„ç†å—
A: React 18 ä¸­ï¼Œæ— è®ºåœ¨åŒæ­¥å‡½æ•°è¿˜æ˜¯å¼‚æ­¥å‡½æ•°é‡Œè°ƒç”¨ setStateï¼Œéƒ½é»˜è®¤å¯ç”¨æ‰¹å¤„ç†ï¼ˆautomatic batchingï¼‰ï¼›
React 17 åŠä»¥å‰ç‰ˆæœ¬ï¼Œå¼‚æ­¥å‡½æ•°é‡Œçš„ setState ä¸ä¼šè‡ªåŠ¨åˆå¹¶ï¼Œéœ€è¦æ‰‹åŠ¨æ‰¹å¤„ç†
import { unstable_batchedUpdates } from 'react-dom';
setTimeout(() => {
  unstable_batchedUpdates(() => {
    setCount(c => c + 1);
    setFlag(f => !f);
  });
});

Q: é’ˆå¯¹æµå¼æ¶ˆæ¯æ¸²æŸ“æ¥è¯´ï¼Œvueæ˜¯ä¸æ˜¯æ¯”reactæ›´é€‚åˆå¤„ç†è¿™ç§åœºæ™¯
A: æµå¼é«˜é¢‘æ¶ˆæ¯åœºæ™¯ä¸‹ï¼ŒVue3 å¯¹å±€éƒ¨èŠ‚ç‚¹æ›´æ–°æ›´å¤©ç„¶é«˜æ•ˆï¼›
React éœ€è¦ä¾èµ– Fiber å¹¶å‘æ¸²æŸ“ã€è‡ªåŠ¨æ‰¹å¤„ç†å’Œè™šæ‹Ÿåˆ—è¡¨ç­‰æ‰‹æ®µæ‰èƒ½è¾¾åˆ°åŒæ ·æµç•…çš„æ•ˆæœ

Q: vue2 å’Œvue3åŒºåˆ«
Aï¼š å“åº”å¼ï¼šObject.defineProperty â†’ Proxy
APIï¼šOptions API â†’ Composition API
æ€§èƒ½ï¼šè™šæ‹Ÿ DOM ä¼˜åŒ–ã€Tree-shakingã€Fragmentã€Suspense
TS æ”¯æŒï¼šVue 3 æ›´å¼º
ç»„ä»¶çµæ´»æ€§ï¼šæ”¯æŒå¤šæ ¹èŠ‚ç‚¹ã€Teleportã€Suspense

Qï¼š react-router / vue-router
A: å‰ç«¯è·¯ç”±æœ¬è´¨æ˜¯åœ°å€æ å˜åŒ–äº‹ä»¶é©±åŠ¨ç»„ä»¶æ¸²æŸ“ï¼ŒHistory API æ§åˆ¶ history.pushState/
history.replaceStateï¼Œwindow.onpopstate/window.onhashchange è§¦å‘è·¯ç”±æ›´æ–°ã€‚

Q: nextTickä½¿ç”¨åœºæ™¯æ€»ç»“
Aï¼š è®¿é—®æ›´æ–°åçš„ DOM / ç­‰å¾…å­ç»„ä»¶æ›´æ–°å®Œæˆ / åœ¨å“åº”å¼çŠ¶æ€æ‰¹é‡æ›´æ–°åæ‰§è¡Œé€»è¾‘
nextTick = å¼‚æ­¥å›è°ƒ + DOM æ›´æ–°å®Œæˆä¿è¯
Vue å“åº”å¼æ›´æ–°æ˜¯å¼‚æ­¥æ‰¹å¤„ç†ï¼ŒnextTick ç”¨äºç­‰å¾… DOM å®Œæˆæ›´æ–°
åº•å±‚å®ç°ï¼šå¾®ä»»åŠ¡é˜Ÿåˆ— (Promise.then) â†’ å›è°ƒé˜Ÿåˆ— â†’ æ‰§è¡Œ
let callbacks = [];
function nextTick(cb) {
  callbacks.push(cb);
  if (!pending) {
    Promise.resolve().then(() => {
      pending = false;
      const copies = callbacks.slice();
      callbacks.length = 0;
      copies.forEach(fn => fn());
    });
  }
}